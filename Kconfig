mainmenu "Nautilus Kernel Configuration"

config DEBUG_INFO
    bool "Compile with debug symbols"
    default n
    help
      Compiles Nautilus with GCC debugging information

config DEBUG_PRINTS
	bool "Enable debugging prints"
	default n
	help
	  Compiles the Nautilus kernel with debugging prints

config USE_NAUT_BUILTINS
    bool "Use built-in utility functions"
    default n
    help
      Compiles the Nuatilus kernel with built-in functions
      like strlen 

config MAX_CPUS
	int "Maximum number of cpus"
	range 1 255
	default "64"
	help 
	  Specifies the maximum number of hardware CPUs supported by Nautilus 
	  For uniprocessor environments, set this to 1

config MAX_IOAPICS
    int "Maximum number of IOAPICS"
    range 1 255
    default "16"
    help
      Specifies the maximum number of IOAPICS supported by Nautilus

config CXX_SUPPORT
    bool "Enable C++ support"
    default n
    help
        Compiles the Nautilus kernel with C++ support. Necessary for,
        e.g. Legion integration

config THREAD_EXIT_KEYCODE
    int "Thread exit keycode"
    range 1 255
    default "196"
    help
        uses a special thread exit keycode
    

menu Debugging

    config ENABLE_ASSERTS
      bool "Enable Runtime Assertions"
      default n
      help
        This will enable runtime assert statements. If this is
        disabled, they will not be generated

    config ENABLE_STACK_CHECK
    bool "Enable Runtime Stack Overrun Checking"
    default n
    help
      This checks the stack pointer on every thread switch to
      make sure that a thread hasn't overrun its allocated 
      stack

    config DEBUG_PAGING
      bool "Debug paging"
      depends on DEBUG_PRINTS
      default n
      help
        Turn on debug prints for paging subsystem

    config DEBUG_MALLOC
      bool "Debug malloc"
      depends on DEBUG_PRINTS
      default n
      help
        Turn on debug prints for memory allocation library 
        (currently liballoc)

    config DEBUG_SMP
      bool "Debug SMP"
      depends on DEBUG_PRINTS
      default n
      help
        Turn on debug prints for SMP code

    config DEBUG_THREADS
      bool "Debug Threads"
      depends on DEBUG_PRINTS
      default n
      help
        Turn on debug prints for the scheduler/threads

    config DEBUG_SYNCH
      bool "Debug synchronization"
      depends on DEBUG_PRINTS
      default n
      help
        Turns on debug prints for synchronization functions
        (barrier, rwlock, condvar)

    
endmenu

menu "Parallel Run-time Integration"

    choice 
        prompt "Selection of Parallel Run-time"
        default NO_RT

        config LEGION_RT
          bool "Legion RT"
          depends on CXX_SUPPORT
          
        config LEGION_RT_ROOT
            string "Legion RT Root"
            depends on LEGION_RT
            help 
              Directory where the intended Legion run-time is installed

        config LEGION_RT_DEBUG
            bool "Legion RT Deep Debugging"
            default n
            depends on LEGION_RT
            help
              Turns on deep debugging prints for legion runtime in Nautilus

        config NDPC_RT
          bool  "NDPC RT"
          depends on CXX_SUPPORT

        config NDPC_RT_ROOT
            string "NDPC RT Root"
            depends on NDPC_RT
            help 
              Directory where the intended NDPC run-time is installed

        config NDPC_RT_TEST_OBJ
            string "NDPC RT Test Object File"
            depends on NDPC_RT
            help 
              File that contains a function test_ndpc()

        config NESL_RT
          bool  "NESL RT"

        config NESL_RT_ROOT
            string "NESL RT Root"
            depends on NESL_RT
            help 
              Directory where the intended NESL run-time is installed

        config NESL_NDPC_RT_ROOT
            string "NESL NDPC RT Root"
            depends on NESL_RT
            help 
              Directory where the intended NDPC run-time is installed

        config NO_RT
          bool "No parallel run-time"
          
     endchoice
        

endmenu


menu "Build Config"

    config TOOLCHAIN_ROOT
      string "Toolchain Root"
      default /usr
      help 
       Directory where the intended GCC toolchain, binutils, libraries, grub, etc are installed.


endmenu


source "src/dev/Kconfig"

